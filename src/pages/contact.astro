---
import BaseLayout from '../layouts/BaseLayout.astro';
import siteConfig from '../../site.config.json';

const { app, forms } = siteConfig;
---

<BaseLayout title={`Contact Us | ${app.name}`} description="Contact form template page for user messages.">
	<div class="form-theme">
		<main class="wrapper form-page">
			<div class="page-links">
				<a href="/">Back to Home</a>
				<a href="/support/">Need support instead?</a>
			</div>
			<section class="form-card">
				<p class="eyebrow">{app.name}</p>
				<h1>Contact Us</h1>
				<p class="intro">Use this form template to collect user questions. Replace the form action and redirect URL before publishing.</p>
				<form id="contact-form" data-botpoison-public-key={forms.botpoisonPublicKey} action={forms.endpoint} method="post" class="form-stack">
					<input type="hidden" name="_redirect" value={forms.redirectUrl} />
					<input type="hidden" name="form_type" value="contact" />
					<label><span>Name</span><input type="text" name="name" placeholder="Your name" required /></label>
					<label><span>Email</span><input type="email" name="email" placeholder="you@example.com" required /></label>
					<label><span>Message</span><textarea name="message" rows="5" placeholder="How can we help?" required></textarea></label>
					<button type="submit" class="btn-submit">
						<svg id="contact-spinner" class="spinner hidden" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z" /></svg>
						<span id="contact-button-text">Send Message</span>
					</button>
				</form>
			</section>
		</main>
	</div>

	<script>
		const form = document.getElementById('contact-form');
		const spinner = document.getElementById('contact-spinner');
		const text = document.getElementById('contact-button-text');
		if (form && spinner && text) {
			form.addEventListener('submit', () => {
				spinner.classList.remove('hidden');
				text.textContent = 'Sending...';
			});
		}
	</script>
</BaseLayout>
