---
import BaseLayout from '../layouts/BaseLayout.astro';
import siteConfig from '../../site.config.json';

const { app, forms } = siteConfig;
---

<BaseLayout title={`Support Request | ${app.name}`} description="Support request form template for user issues.">
	<div class="form-theme">
		<main class="wrapper form-page">
			<div class="page-links">
				<a href="/">Back to Home</a>
				<a href="/contact/">General contact</a>
			</div>
			<section class="form-card">
				<p class="eyebrow">{app.name}</p>
				<h1>Support Request</h1>
				<p class="intro">Use this form template for bug reports and support issues. Replace the form action and destination fields before publishing.</p>
				<form id="support-form" data-botpoison-public-key={forms.botpoisonPublicKey} action={forms.endpoint} method="post" class="form-stack">
					<input type="hidden" name="_redirect" value={forms.redirectUrl} />
					<input type="hidden" name="form_type" value="support" />
					<label><span>Name</span><input type="text" name="name" placeholder="Your name" required /></label>
					<label><span>Email</span><input type="email" name="email" placeholder="you@example.com" required /></label>
					<label><span>Issue Type</span><select name="issue_type" required><option value="" selected disabled>Select one</option><option>Bug</option><option>Billing</option><option>Account Access</option><option>General Support</option></select></label>
					<label><span>Details</span><textarea name="details" rows="6" placeholder="Describe the issue and steps to reproduce it." required></textarea></label>
					<button type="submit" class="btn-submit">
						<svg id="support-spinner" class="spinner hidden" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z" /></svg>
						<span id="support-button-text">Submit Support Request</span>
					</button>
				</form>
			</section>
		</main>
	</div>

	<script>
		const form = document.getElementById('support-form');
		const spinner = document.getElementById('support-spinner');
		const text = document.getElementById('support-button-text');
		if (form && spinner && text) {
			form.addEventListener('submit', () => {
				spinner.classList.remove('hidden');
				text.textContent = 'Submitting...';
			});
		}
	</script>
</BaseLayout>
