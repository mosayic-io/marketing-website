---
import BaseLayout from '../layouts/BaseLayout.astro';
import siteConfig from '../../site.config.json';

const redirectConfig = {
	appStoreUrl: 'https://apps.apple.com/us/app/your-app-name/id123456789',
	playStoreUrl: 'https://play.google.com/store/apps/details?id=com.yourcompany.yourapp',
	websiteUrl: 'https://yourapp.com',
};
---

<BaseLayout title={`${siteConfig.app.name} - Redirecting...`} description={siteConfig.meta.description} image={siteConfig.meta.ogImagePath} noindex>
	<div class="redirect-page">
		<div class="redirect-container">
			<h1>{siteConfig.app.name}</h1>
			<p>Redirecting you to the right place...</p>
			<div class="redirect-spinner" aria-label="Loading"></div>
		</div>
	</div>

	<script define:vars={{ redirectConfig }}>
		(function () {
			'use strict';

			function detectPlatform() {
				const userAgent = navigator.userAgent || navigator.vendor || window.opera || '';
				if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) return 'ios';
				if (/android/i.test(userAgent)) return 'android';
				return 'web';
			}

			function redirect() {
				const platform = detectPlatform();
				if (platform === 'ios') window.location.href = redirectConfig.appStoreUrl;
				else if (platform === 'android') window.location.href = redirectConfig.playStoreUrl;
				else window.location.href = redirectConfig.websiteUrl;
			}

			setTimeout(redirect, 800);
		})();
	</script>
</BaseLayout>
